<!DOCTYPE html>
<html lang="en" dir="auto">

<head>
	<meta name="generator" content="Hugo 0.139.2"><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>馬丁沒有派對</title>
<meta name="keywords" content="devops, 運維, 後端">
<meta name="description" content="我把青春都寫在blog上了 😜😜">
<meta name="author" content="">
<link rel="canonical" href="https://blog.ooopiz.com/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css" integrity="sha256-1vzSCk&#43;4bvpN&#43;sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://blog.ooopiz.com/logo/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://blog.ooopiz.com/logo/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://blog.ooopiz.com/logo/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://blog.ooopiz.com/logo/apple-touch-icon.png">
<link rel="mask-icon" href="https://blog.ooopiz.com/logo/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://blog.ooopiz.com/index.xml">
<link rel="alternate" hreflang="en" href="https://blog.ooopiz.com/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3680083267042451" crossorigin="anonymous"></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-4XSTL9TGTE"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-4XSTL9TGTE');
        }
      </script><meta property="og:url" content="https://blog.ooopiz.com/">
  <meta property="og:site_name" content="馬丁沒有派對">
  <meta property="og:title" content="馬丁沒有派對">
  <meta property="og:description" content="我把青春都寫在blog上了 😜😜">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">
      <meta property="og:image" content="https://blog.ooopiz.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://blog.ooopiz.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E">
<meta name="twitter:title" content="馬丁沒有派對">
<meta name="twitter:description" content="我把青春都寫在blog上了 😜😜">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "馬丁沒有派對",
  "url": "https://blog.ooopiz.com/",
  "description": "我把青春都寫在blog上了 😜😜",
  "logo": "https://blog.ooopiz.com/logo/favicon.ico",
  "sameAs": [
      
  ]
}
</script>
</head>

<body class="list dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://blog.ooopiz.com/" accesskey="h" title="馬丁沒有派對 (Alt + H)">
                <img src="https://blog.ooopiz.com/logo/apple-touch-icon.png" alt="" aria-label="logo"
                    height="35">馬丁沒有派對</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://blog.ooopiz.com/" title="Home">
                    <span class="active">Home</span>
                </a>
            </li>
            <li>
                <a href="https://blog.ooopiz.com/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://blog.ooopiz.com/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://blog.ooopiz.com/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://blog.ooopiz.com/links/" title="Links">
                    <span>Links</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">CoreOS Static Ip 固定 IP 設定
    </h2>
  </header>
  <div class="entry-content">
    <p>設定 static ip 副檔名必須是.network
$ vi /etc/systemd/network/enp0s8.network
[Match] Name=enp0s8 [Network] Address=192.168.56.201/24 reboot sudo reboot
</p>
  </div>
  <footer class="entry-footer"><span title='2019-07-24 17:01:37 +0800 CST'>July 24, 2019</span></footer>
  <a class="entry-link" aria-label="post link to CoreOS Static Ip 固定 IP 設定" href="https://blog.ooopiz.com/post/2019/07/coreos-static-ip/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Docker cli 連線到遠端的 dockerd daemon
    </h2>
  </header>
  <div class="entry-content">
    <p>docker 是 client/server 的架構 昨天在網路上看到一句話，大意是：
docker 是 client / server 的架構， 由一個 docker cli 和 dockerd 的 daemon 組成
才赫然發現 docker 別有洞天吶。
原來每天在敲的 docker 指令都是在操控本機的 docker daemon。
如何連線到遠端的 docker daemon 有了上面那句話，就在想說是不是可以用我 local 的 docker cli 連線到其它機器的 dockerd。
今天馬上用我 virtualbox 中的 coreOS 進行測試一下。
dockerd port listen dockerd default 好像都沒有開啟 tcp port，必須在 dockerd 啟動時加入 -H 參數。
-H tcp://0.0.0.0:2375
如果是用 systemctl 控制 docker 你可以找到 docker.service，在腳本中加入 -H 參數。
以 coreOS 為例，
我的檔案在 /run/systemd/system/docker.service
...</p>
  </div>
  <footer class="entry-footer"><span title='2019-06-04 20:22:08 +0800 CST'>June 4, 2019</span></footer>
  <a class="entry-link" aria-label="post link to Docker cli 連線到遠端的 dockerd daemon" href="https://blog.ooopiz.com/post/2019/06/docker-connecting-remote-daemon/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Virtualbox 安裝 Coreos
    </h2>
  </header>
  <div class="entry-content">
    <p>到官網下載 coreOS ISO 檔 Booting CoreOS Container Linux from an ISO
如標題，這份 ISO 僅是開機片而已，並無安裝動作，
如何安裝的部分下面會提到。
VirtualBox 新增機器 選 Linux 64 bit 即可
掛載剛下載的 ISO 檔
開機 官網有說明最小的 RAM 必須要 2G，一開始沒注意我也是只開了 512，下面是記憶體不足時的反應。
512 G - 無限重開 1024 G - boot into emergency shell 2048 G - OK 使用ISO開機之後，並不會把檔案裝進硬碟，在上面進行任何操作，重開機後都會消失。
安裝到硬碟 這個步驟要使用 coreos-install 這個指令來安裝硬碟，
當 ISO boot 的時候，該指令就已經內建在系統裡了。
要特別注意的是你必須寫一個 ignition.json 檔案來作為安裝時的參數，
這個檔案可以用來設定用戶、網路、儲存、服務等。。。
必須在設定檔中給定一個 ssh 公鑰，以利後續登入（如果有登入需求的話）
否則裝好之後是無法使用 ssh login in 的。
...</p>
  </div>
  <footer class="entry-footer"><span title='2019-05-28 15:20:25 +0800 CST'>May 28, 2019</span></footer>
  <a class="entry-link" aria-label="post link to Virtualbox 安裝 Coreos" href="https://blog.ooopiz.com/post/2019/05/virtualbox-install-coreos/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Fswatch Save My Times
    </h2>
  </header>
  <div class="entry-content">
    <p>Fswatch 可以用來檢測資料夾與文件的變更 最近在用 vim 練習 golang，真的是 go run 到手累心也累，
就到網路上搜看看有沒有可以監控檔案存檔事件的工具，
於是找到了這款 Mac 可以使用的 Fswatch
安裝 mac 上安裝就直接
brew install fswatch
腳本 因為我只要監控 go file 有沒有異動，
如果有的話幫我 compilar，所以腳本中有限定 .go 檔。
#!/bin/bash BASEDIR=$(dirname &#34;$0&#34;) fswatch &#34;$BASEDIR&#34; | while read file do filename=$(basename -- &#34;$file&#34;) extension=&#34;${filename##*.}&#34; filename=&#34;${filename%.*}&#34; if [ &#34;$extension&#34; = &#34;go&#34; ] then echo &#34;=============================================\n\n&#34; time go run ${file} fi done Demo Reference OS X使用fswatch&#43;rsync自动检测文件夹改动并同步 </p>
  </div>
  <footer class="entry-footer"><span title='2019-05-23 23:27:58 +0800 CST'>May 23, 2019</span></footer>
  <a class="entry-link" aria-label="post link to Fswatch Save My Times" href="https://blog.ooopiz.com/post/2019/05/fswatch-save-my-times/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">IPsec Lan to Lan Vigor-2925 and AWS-ec2
    </h2>
  </header>
  <div class="entry-content">
    <p>前言 簡單說一下就是，我想讓我所在的網路可以訪問到 AWS subnet 的固定子網 IP，
內網的工作同仁或者內部 Server 不用額外做 vpn 撥號或其他動作。
其實 AWS 上面也有現成的服務可以租用（在 VPC 的設定中）
一個月大概在台幣 1,000 左右 AWS VPN pricing。
但基於我想自己架看看，另外也可以省點錢，就租了一台 EC2 來土炮了。
目標就是使用 Vigor 2925 播出到 IPsec server 保持一個 Lan to Lan 的連線。
公司端：
設備：Vigor 2925 網段：192.168.0.0/24 AWS 端：
網段：172.21.0.0/16 IPsec Server ： CentOS7, EIP libreSwan 簡介 libreSwan 是 IPsec 協議的開源實現，基於FreeSwan 專案。
在 Centos7 版本後， 提供ipsec 服務包由libreswan替代了openswan
安裝 libreswan $ yum install epel-release $ yum install libreswan 設定 ipsec ipsec 啟動時會載入 /etc/ipsec.conf
...</p>
  </div>
  <footer class="entry-footer"><span title='2019-05-17 08:02:00 +0800 CST'>May 17, 2019</span></footer>
  <a class="entry-link" aria-label="post link to IPsec Lan to Lan Vigor-2925 and AWS-ec2" href="https://blog.ooopiz.com/post/2019/05/vigor2925-ipsec-lantolan-aws-ec2/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">關於 Docker volume create
    </h2>
  </header>
  <div class="entry-content">
    <p>前言 某次我在看某個服務的安裝文件時，發現了 docker volume create 這個指令。
原本我都是使用 -v 對應到我 host 機器的目錄
ex :
-v $(pwd)/nginx-cache:/var/cache/nginx
後來很好奇 docker volume create 的用途還有存放路徑。
於是就小小的研究了一下。
docker volume create 一般的 Linux 在執行 docker volume create … 之後，
可以在 /var/lib/docker/volumes 看到 docker 幫你建立 volume 名稱的資料夾。
docker volume create In Mac 可是當你使用 Mac 執行過 docker volume create … 之後，
並無法在 Mac 電腦中找到 /var/lib/docker/volumes 這個目錄。
在 Mac 電腦 是無法直接訪問 /var/lib/docker/volumes 這個目錄，
必須先 screen 到 docker 目錄下的 tty，
進到 tty 之後就可以在 /var/lib/docker/volums 看到 create 的目錄名稱了。
...</p>
  </div>
  <footer class="entry-footer"><span title='2019-05-10 07:22:01 +0800 CST'>May 10, 2019</span></footer>
  <a class="entry-link" aria-label="post link to 關於 Docker volume create" href="https://blog.ooopiz.com/post/2019/05/docker-volume-create/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Gitlab-ce 版本升級與容器化
    </h2>
  </header>
  <div class="entry-content">
    <p>升級目標 gitlab-ce:8.14.4 升級到 gitlab-ce:11.3.4 Omnibus 轉移到 Docker 容器（Dockerized） 步驟流程 一、備份 Omnibus 上的資料 二、準備 docker 環境 三、啟動新環境（使用 gitlab-ce:8.14.4-ce.0 版本的 Image）與還原 四、版本逐步升級 一、備份 Omnibus 上的資料 $ gitlab-rake gitlab:backup:create
二、準備 docker 環境 Install docker, docker-compose 檔案存放的根目錄我設定在 /srv/gitlab，因此先在母體主機建立三個資料夾後續給 docker 掛載。 /srv/gitlab/config /srv/gitlab/logs /srv/gitlab/data 三、啟動新環境（使用 gitlab-ce:8.14.4-ce.0 版本的 Image）與匯入 複製 omnibus 機器下的主機金鑰組到新環境 From omnibus (/etc/ssh/ssh_host_*) copy to /srv/gitlab/config/ 撰寫 docker-compose.yaml 如下 hostname 與 external_url 替換成自己的參數 web: image: &#39;gitlab/gitlab-ce:8.14.4-ce.0&#39; container_name: gitlab restart: always hostname: &#39;git.example.com&#39; environment: TZ: Asia/Taipei GITLAB_OMNIBUS_CONFIG: | external_url &#39;http://git.example.com&#39; # Add any other gitlab.rb configuration here, each on its own line ports: - &#39;22:22&#39; - &#39;80:80&#39; - &#39;443:443&#39; volumes: - &#39;/srv/gitlab/config:/etc/gitlab&#39; - &#39;/srv/gitlab/logs:/var/log/gitlab&#39; - &#39;/srv/gitlab/data:/var/opt/gitlab&#39; 使用上方的docker-compose 啟動 gitlab-ce $ docker-compose up -d
...</p>
  </div>
  <footer class="entry-footer"><span title='2018-11-01 10:45:51 +0800 CST'>November 1, 2018</span></footer>
  <a class="entry-link" aria-label="post link to Gitlab-ce 版本升級與容器化" href="https://blog.ooopiz.com/post/2018/11/gitlab-version-update-and-dockerized/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="https://blog.ooopiz.com/page/2/">
      «&nbsp;Prev&nbsp;
    </a>
    <a class="next" href="https://blog.ooopiz.com/page/4/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://blog.ooopiz.com/">馬丁沒有派對</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
